# =============================================================================
# MIASMA - DOCKER COMPOSE ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# This file is used by docker-compose.yml for container configuration

# =============================================================================
# GLOBAL SETTINGS
# =============================================================================
COMPOSE_PROJECT_NAME=miasma
ENVIRONMENT=development

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_SERVER=postgres
POSTGRES_PORT=5432
POSTGRES_USER=miasma_user
POSTGRES_PASSWORD=change-this-secure-password
POSTGRES_DB=miasma_db

# PostgreSQL Docker settings
POSTGRES_VERSION=15-alpine

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=change-this-redis-password
REDIS_VERSION=7-alpine

# =============================================================================
# APPLICATION PORTS
# =============================================================================
# Frontend (React)
FRONTEND_PORT=3000

# Backend (FastAPI)
BACKEND_PORT=8000

# Database (PostgreSQL)
DB_PORT=5432

# Cache (Redis)
CACHE_PORT=6379

# Selenium Hub (for web scraping)
SELENIUM_PORT=4444

# =============================================================================
# VOLUME PATHS
# =============================================================================
# Database data persistence
DB_DATA_PATH=./data/postgres

# Redis data persistence  
REDIS_DATA_PATH=./data/redis

# Application logs
LOGS_PATH=./logs

# Scraped data storage
SCRAPED_DATA_PATH=./data/scraped

# =============================================================================
# SELENIUM CONFIGURATION
# =============================================================================
SELENIUM_VERSION=4.15.0
CHROME_VERSION=latest

# Selenium scaling (for production)
SELENIUM_NODE_MAX_SESSIONS=2
SELENIUM_NODE_MAX_INSTANCES=2

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Enable development features
DEV_MODE=true
DEBUG=true
HOT_RELOAD=true

# Development ports (alternative ports if main ones are in use)
DEV_FRONTEND_PORT=5173
DEV_BACKEND_PORT=8001

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# JWT Configuration
SECRET_KEY=your-super-secret-jwt-key-minimum-32-characters-change-in-production
ALGORITHM=HS256

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173

# =============================================================================
# RESOURCE LIMITS
# =============================================================================
# Memory limits for containers (adjust based on your system)
FRONTEND_MEMORY=512m
BACKEND_MEMORY=1g
DATABASE_MEMORY=512m
REDIS_MEMORY=256m
SELENIUM_MEMORY=2g

# CPU limits
FRONTEND_CPUS=0.5
BACKEND_CPUS=1.0
DATABASE_CPUS=1.0
REDIS_CPUS=0.5
SELENIUM_CPUS=2.0

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================
# Backup settings
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Log rotation
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# These should be set differently in production
# ENVIRONMENT=production
# DEBUG=false
# DEV_MODE=false
# HOT_RELOAD=false
# POSTGRES_PASSWORD=super-secure-production-password
# REDIS_PASSWORD=super-secure-redis-password
# SECRET_KEY=cryptographically-secure-production-key